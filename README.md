# NYC Taxi DVC example

This repository demonstrates a minimal DVC pipeline for processing NYC taxi data, training a model, and publishing metrics. The goal of this README is to show how anyone can view DVC results (data, model, and metrics) and reproduce the pipeline locally.

Repository layout (relevant files)

- `dvc.yaml` - DVC pipeline stages (`preprocess`, `train_model`).
- `preprocess_taxi.py` - reads `data/raw_taxi_data.csv` and writes `data/cleaned_taxi_data.csv`.
- `train_taxi_model.py` - trains a model and writes `taxi_model.pkl` and `taxi_metrics.json`.
- `data/raw_taxi_data.csv.dvc` - DVC-tracked pointer to the raw dataset.
- `data/cleaned_taxi_data.csv` - pipeline output (generated by `preprocess`).
- `taxi_metrics.json` - metrics file produced by the `train_model` stage.

Quick contract

- Inputs: `data/raw_taxi_data.csv` (tracked by DVC)
- Outputs: `data/cleaned_taxi_data.csv`, `taxi_model.pkl`, `taxi_metrics.json`
- Success criteria: pipeline repro runs without error and metrics are produced.

Prerequisites

- git
- DVC (tested with DVC >= 2.x)
- Python 3.8+ and the Python packages required by the scripts (pandas, scikit-learn, joblib)

Basic workflow

1. Clone the repo (if you haven't already):

```bash
git clone https://github.com/ashish159565/MLOps-Lab3-DVC.git
cd MLOps-Lab3-DVC
```

2. See the pipeline definition and DAG

To inspect the pipeline stages defined in `dvc.yaml`:

```bash
dvc dag

# or show the YAML
cat dvc.yaml
```

3. Reproduce the pipeline locally

To run the pipeline from raw data through cleaning and training:

```bash
dvc repro
```

This will run `preprocess_taxi.py` to create `data/cleaned_taxi_data.csv` and then run `train_taxi_model.py` to produce `taxi_model.pkl` and `taxi_metrics.json`.

4. Inspect metrics

Show the current metrics collected by DVC:

```bash
dvc metrics show
```

If you have Git commits with different metrics, compare them with:

```bash
dvc metrics diff
```

Alternatively view the raw JSON produced by the training script:

```bash
cat taxi_metrics.json
```

5. Inspect outputs

- Cleaned CSV: `data/cleaned_taxi_data.csv`
- Model file: `taxi_model.pkl`
